
  <div class="container paddingBottom60"
      flow-init="{target: '/upload', singleFile: false}"
      flow-file-added="page.prepImg( $file, $event, $flow)">
      <div class="pageHeader">
        <div class="custom-back" ng-click="page.back()" style="z-index: 4;"></div>
        <div class='pageTitle'>Add Applicants</div>
        <div class='pageSubtitle'>{{page.role.name}}</div>
      </div>
      <div class="custom-table">
        <table class="table table-add-applicants">
          <thead>
          <tr>
            <th>First name</th>  
            <th>Last name</th>
            <th>E-mail</th>
            <th>Gender</th>
            <th>Age</th>
            <th>Requirements</th>
            <th>Comments</th>
            <th></th>
          </tr>
          </thead>

          <tbody>
          <!-- LOOP OVER THE USERS -->
          <tr ng-show="page.applicants.length > 0" ng-repeat="applicant in page.applicants track by $index">
              <td>
                  <div class="custom-form">
                      <input type="text" ng-model="applicant.name.first" Required >
                  </div>
              </td>
              <td> 
                  <div class="custom-form">
                      <input type="text" ng-model="applicant.name.last" Required >
                  </div>
              </td>
              <td>
                  <div class="custom-form">
                      <input type="text" class="custom-form" ng-model="applicant.email" Required >
                  </div>
              </td>
              <td>
                  <div class="custom-dropdown" uib-dropdown is-open="false">
                        <span type="text" class="custom-form" uib-dropdown-toggle ng-disabled="disabled">
                          {{applicant.gender || "Gender"}}</span>
                        <ul uib-dropdown-menu role="menu" aria-labelledby="single-button">
                          <li role="menuitem"><a href="#" ng-click="applicant.gender = 'Female'">Female</a></li>
                          <li role="menuitem"><a href="#" ng-click="applicant.gender = 'Male'">Male</a></li>
                        </ul>
                  </div> 
              </td>
              <td>
                  <div class="custom-form">
                      <input type="text" class="custom-form" ng-model="applicant.age" Required>
                  </div>
              </td>
              <td> 
                  <div class="div-table">
                      <div class="div-table-row" ng-repeat="rq in page.role.requirements">
                          <div class="div-table-col">{{rq.name}}</div>
                          <div class="div-table-col" ng-repeat="file in applicant.files track by $index"><img style="width:20px; height:20px;" flow-img="file"/></div>
                      </div>
                  </div>            
    <!--
                  <td>
                        <img  ng-repeat="file in applicant.files track by $index" style="width:20px; height:20px;" flow-img="file"/>
                  </td>
                  <td>
                    <span ng-repeat="link in applicant.links">{{link.name}}</span>
                  </td>
    -->
              </td>  
              <td>
                  <textarea ng-model="page.newData.message" rows="1" class="custom-form-textarea"></textarea>      
              </td>
              <td ng-click="page.removeApp($index)">
                  <img src="/assets/imgs/ic_trash.svg" width="16px" height="16px">
              </td>
          </tr>
          <!-- Adding Form -->
          <tr ng-show="!page.processing"> 
              <td>
                  <div class="custom-form">
                      <input type="text" class="custom-form" ng-model="page.newData.name.first" Required >
                  </div>
              </td>
              <td> 
                  <div class="custom-form">
                      <input type="text" class="custom-form" ng-model="page.newData.name.last" Required >
                  </div>
              </td>
              <td>
                  <div class="custom-form">
                      <input type="text" class="custom-form" ng-model="page.newData.email" Required >
                  </div>
              </td>
              <td>
                  <div class="custom-dropdown" uib-dropdown is-open="false">
                        <span type="text" class="custom-form" uib-dropdown-toggle ng-disabled="disabled">
                          {{page.newData.gender || "Gender"}}</span>
                        <ul uib-dropdown-menu role="menu" aria-labelledby="single-button">
                          <li role="menuitem"><a href="#" ng-click="page.newData.gender = 'Female'">Female</a></li>
                          <li role="menuitem"><a href="#" ng-click="page.newData.gender = 'Male'">Male</a></li>
                        </ul>
                  </div>
              </td>
              <td>
                  <div class="custom-form">
                      <input type="text" class="custom-form" ng-model="page.newData.age" Required>
                  </div>
              </td>
              <td>
    <!--              <div ng-repeat="rq in page.role.requirements">{{rq.name}}: <a ng-click="page.newRqmnt(rq.name)">Upload</a> / Link</div>-->
                  <div class="div-table">
                      <div class="div-table-row" ng-repeat="rq in page.role.requirements">
                          <div ng-show="!page.addingLink" class="div-table-col">{{rq.name}}</div>
                          <div ng-show="!page.addingLink" class="div-table-col">
                                <span ng-click="page.newRqmnt(rq.name)"  flow-btn>
                                    <a ng-href="#">Upload</a>
                                </span> / 
                                <a ng-href="#" ng-click="page.togAddLink()">Link</a>
                              </div>
                            </div>
                          <div class="div-table-col" ng-show="page.addingLink">
<!--                              <a ng-href="#" ng-click="page.togAddLink()">Add file</a>-->
                              <div class="custom-form">
                                  <input ng-model="page.newLink" placeholder="http://">                             
                                  <img class="upload-cancel" src="/assets/imgs/ic_cross_lightgrey.svg" ng-click="page.addLink(page.newLink)">
                              </div>
                          </div>
                          <div class="div-table-col">
                              <div ng-repeat="file in page.files track by $index"><img class="upload-thumbnail" flow-img="file"/>File name<img class="upload-cancel" src="/assets/imgs/ic_cross_lightgrey.svg" ng-click=""></div>
                          </div>
                  </div>
              </td>
              <td>
                  <textarea ng-model="page.newData.message" rows="1" class="custom-form-textarea"></textarea>      
              </td>
              <td>
                  <img ng-click="page.clearNewApp()" src="/assets/imgs/ic_trash.svg" width="16px" height="16px">
              </td>
          </tr>
      </tbody>
      </table>
    </div>    
 
      
      
    <table>
    <tr ng-repeat="file in page.files track by $index">
        <td><img style="width:116px; height:80px;" flow-img="file"/></td>
    </tr>
    <tr>
      <td>
          <ul>
            <li ng-repeat = "link in page.newData.links">
              <span ng-if="link" ng-dblclick="page.removeLink($index)">{{link.source}}</span>
            </li>
          </ul>
        </td>
    </tr>
    </table>
    <!--
      <textarea type="text"  width="140"rows="4"
           ng-model="page.newData.message" Required>
      </textarea>
    -->
    <!--
      <ul>
        <li ng-repeat = "link in page.newData.links">
          <span ng-if="link">{{link.source}}</span>
        </li>
      </ul>
    -->
    <!--
      <input ng-model="page.newLink" placeholder="http://">
      <img src="/assets/imgs/ic_plus.svg" width="16px" height="16px" ng-click="page.addLink(page.newLink)">
    </div>
    -->

    <div ng-show="page.processing" class="custom-loader">
      <img style ="height:90px; width:auto" ng-src='/assets/imgs/spin.gif'>
    </div>   

    <div class="add-applicants-add-more">
        <button type="submit" class="custom-btn-secondary-small btn-add" ng-click="page.anotherApp()" ng-disabled="page.processing">Add more</button>
    </div>

    <div class="clear"></div>
    
    <div class="col-md-4 col-md-offset-4">
        <button type="submit" class="custom-btn-primary-large" ng-click="page.submit()" ng-disabled="page.processing">Save</button>
    </div>  
</div>