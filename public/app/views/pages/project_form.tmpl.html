<div class="aside" tabindex="-1" role="dialog" flow-prevent-drop
      flow-init="{target: '/upload', singleFile: true}"
      flow-file-added="vm.prepImg( $file, $event, $flow )"
      flow-files-submitted="$flow.upload()"
      flow-file-success="$file.msg = $message">
  <div class="asideBg">
    <div class="asideTitle" ng-if="vm.NEW">Create project</div>
    <div class="asideTitle" ng-if="!vm.NEW">Edit project</div>

    <div type="button" class="custom-close" ng-click="$hide()"></div>

    <form class="container-page">
      <div class="form-group">
      <!-- <img ng-if="$flow.files[0]" flow-img="$flow.files[0]" 
              style="width:400px; height:200px;"/> -->
        <label>Name</label>
        <input type="text" class="custom-form" ng-model="vm.projectData.name" required autofocus>
      </div>
      <div class="form-group">
        <!-- <label>Description (Max {{charRmnd}} characters)</label> -->
        <label>Description</label>
        <textarea ng-trim='0' rows="4" class="custom-form-textarea" ng-model="vm.projectData.description"></textarea>
        <label>Usage</label>
        <textarea ng-trim='0' rows="4" class="custom-form-textarea" ng-model="vm.projectData.usage"></textarea>
      </div>        
      <div class="form-group">
        <label>Cover photo</label>
      </div>
        <ul class="select-coverphoto-wrapper">
            <li ng-repeat=" photoLink in vm.coverphotos track by $index">
              <div class="{{vm.CPStyling}}"
                    id="{{photoLink.split('/').pop().split('.').shift()}}" 
                    ng-click="vm.selectCP(photoLink, $index)"
                    style="background: url({{photoLink}});
                     background-size: 116px auto;">
              </div>
            </li>
            <li flow-btn>
              <div class="{{vm.CPStyling}}"
                    id="cust-cp" 
                    ng-click="vm.selectCustCP()">
              <img ng-if="$flow.files[0]" flow-img="$flow.files[0]" 
              style="width:116px; height:80px;"/>
              </div>
            </li>
        </ul>

      <div ng-if="vm.processing" class="custom-loader">
        <img style ="height:40px; width:auto" ng-src='/assets/imgs/spin.gif'>
      </div>  
      <button type="submit" class="custom-btn-primary-large" ng-if="vm.NEW"
       ng-click="vm.save(aside.projectData.name, aside.projectData.description)" ng-disabled="vm.processing">
        <span>Create project</span>
      </button>
      <button type="submit" class="custom-btn-primary-large" ng-if="!vm.NEW"
      ng-click="vm.update(aside.projectData)" ng-disabled="vm.processing">
        <span>Save</span>
      </button>

    </form>
    <br>
  </div>
</div>
